/* /index.html 200
/_redirects
<!-- Chatbot HTML5, CSS et JS sans React - Version autonome -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chatbot R√©novation</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; padding:20px; }
    .card { max-width:500px; margin:auto; background:white; padding:20px; border-radius:15px; box-shadow:0 4px 12px rgba(0,0,0,0.1); }
    button { width:100%; padding:12px; margin-top:10px; border:none; border-radius:8px; background:#007aff; color:white; cursor:pointer; }
    button.secondary { background:#ddd; color:#333; }
    .grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    input { width:100%; padding:10px; border-radius:6px; border:1px solid #ccc; margin-top:10px; }
    .room-block { background:#f0f0f0; padding:10px; border-radius:10px; margin-bottom:10px; }
  </style>
</head>
<body>

<div id="app"></div>

<script>
// --- Donn√©es ---
const ROOMS = ["Salon","Cuisine","Salle de bain","Chambre","WC","Couloir","Buanderie","Garage"];
const SERVICES = {
  "Salon":["Peinture","√âlectricit√©","Rev√™tement mural","Pl√¢trerie","Isolation"],
  "Cuisine":["Installation cuisine","√âlectricit√©","Plomberie","Carrelage","Peinture"],
  "Salle de bain":["Plomberie","Carrelage","Douche","√âlectricit√©","Peinture"],
  "Chambre":["Peinture","√âlectricit√©","Parquet","Isolation","Placard / Dressing"],
  "WC":["Plomberie","Peinture","Carrelage"],
  "Couloir":["Peinture","√âclairage","Pl√¢trerie"],
  "Buanderie":["Plomberie","√âlectricit√©","Sol","Peinture"],
  "Garage":["√âlectricit√©","Isolation","Porte de garage","Peinture"]
};

let step = 0;
let selectedRooms = [];
let currentRoom = null;
let selectedServices = {};
let clientInfo = { nom:"", telephone:"", email:"" };

function render() {
  const app = document.getElementById("app");

  // √âtape 0 ‚Äî Accueil
  if (step === 0) {
    app.innerHTML = `
      <div class="card">
        <h2>Bonjour üëã</h2>
        <p>Je suis votre artisan tout corps d'√©tat. Commen√ßons votre devis ensemble.</p>
        <button onclick="next()">Commencer</button>
      </div>`;
    return;
  }

  // √âtape 1 ‚Äî Choix des pi√®ces
  if (step === 1) {
    app.innerHTML = `<div class='card'><h2>Quelles pi√®ces souhaitez-vous r√©nover ?</h2>
      <div class='grid'>
        ${ROOMS.map(room => `
          <button class="${selectedRooms.includes(room) ? '' : 'secondary'}" onclick="toggleRoom('${room}')">${room}</button>`).join("")}
      </div>
      ${selectedRooms.length>0 ? `<button onclick='next()'>Continuer</button>` : ''}
    </div>`;
    return;
  }

  // √âtape 2 ‚Äî Prestations par pi√®ce
  if (step === 2) {
    if (!currentRoom) currentRoom = selectedRooms[0];
    const services = SERVICES[currentRoom] || [];

    app.innerHTML = `
      <div class='card'>
        <h2>Prestations pour <b>${currentRoom}</b></h2>
        <div class='grid'>
          ${services.map(s => `
            <button class="${selectedServices[currentRoom]?.includes(s) ? '' : 'secondary'}" onclick="toggleService('${currentRoom}','${s}')">${s}</button>`).join('')}
        </div>
        <button onclick="validateRoom()">Valider cette pi√®ce</button>
      </div>`;
    return;
  }

  // √âtape 3 ‚Äî Coordonn√©es
  if (step === 3) {
    app.innerHTML = `
      <div class='card'>
        <h2>Vos coordonn√©es</h2>
        <input placeholder='Nom' value='${clientInfo.nom}' onchange="clientInfo.nom=this.value" />
        <input placeholder='T√©l√©phone' value='${clientInfo.telephone}' onchange="clientInfo.telephone=this.value" />
        <input placeholder='Email' value='${clientInfo.email}' onchange="clientInfo.email=this.value" />
        <button onclick="next()">G√©n√©rer mon devis</button>
      </div>`;
    return;
  }

  // √âtape 4 ‚Äî R√©capitulatif
  app.innerHTML = `
    <div class='card'>
      <h2>üéâ Votre devis est pr√™t</h2>
      ${selectedRooms.map(room => `
        <div class='room-block'>
          <b>${room}</b>
          <ul>${(selectedServices[room]||[]).map(s => `<li>${s}</li>`).join('')}</ul>
        </div>`).join('')}
      <button>T√©l√©charger le PDF</button>
      <button class='secondary'>Envoyer par email</button>
      <button>Appeler Chouahib</button>
    </div>`;
}

function next() { step++; render(); }
function toggleRoom(room) {
  if (selectedRooms.includes(room)) {
    selectedRooms = selectedRooms.filter(r => r !== room);
  } else selectedRooms.push(room);
  render();
}
function toggleService(room, service) {
  if (!selectedServices[room]) selectedServices[room] = [];
  if (selectedServices[room].includes(service)) {
    selectedServices[room] = selectedServices[room].filter(s => s !== service);
  } else selectedServices[room].push(service);
  render();
}
function validateRoom() {
  const index = selectedRooms.indexOf(currentRoom) + 1;
  if (index < selectedRooms.length) currentRoom = selectedRooms[index];
  else next();
  render();
}

render();
</script>
</body>
</html>

